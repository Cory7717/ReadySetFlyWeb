import{r as s,t as g,j as e,E as p,F as j,G as w,C as o,s as N,B as y,H as v}from"./index-umuuNHW5.js";import{S}from"./StudentLayout-WUZeSZ-N.js";import{N as C}from"./NextStepCTA-Dpv35yEy.js";function F(){var c,d;const[a,x]=s.useState(""),[t,i]=s.useState(null),[n,l]=s.useState(!1);s.useEffect(()=>{g("student_page_view",{page:"weather"})},[]);const f=async()=>{if(a){l(!0);try{const m=await(await fetch(v(`/api/aviation-weather/${a.toUpperCase()}`))).json();i(m)}catch{i({error:"Unable to fetch weather."})}finally{l(!1)}}},r=((c=t==null?void 0:t.metar)==null?void 0:c.flight_category)||"UNKNOWN",u=r==="VFR"?"Good for training":r==="MVFR"?"Marginal":"No-go";return e.jsxs(S,{title:"Student Weather",subtitle:"Simplified weather view for training decisions (always consult an instructor).",children:[e.jsxs(p,{children:[e.jsx(j,{children:"Training disclaimer"}),e.jsx(w,{children:"This tool is informational only. Always follow your instructor and official sources."})]}),e.jsxs(o,{className:"p-4 flex flex-col sm:flex-row gap-3",children:[e.jsx(N,{placeholder:"Enter ICAO (e.g., KJFK)",value:a,onChange:h=>x(h.target.value)}),e.jsx(y,{onClick:f,disabled:n,children:n?"Loading...":"Check Weather"})]}),t&&!t.error&&e.jsxs(o,{className:"p-4 space-y-2",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Flight category"}),e.jsx("div",{className:"text-2xl font-semibold",children:r}),e.jsx("div",{className:"text-sm text-muted-foreground",children:u}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["METAR: ",((d=t==null?void 0:t.metar)==null?void 0:d.raw)||"Unavailable"]})]}),(t==null?void 0:t.error)&&e.jsx(o,{className:"p-4 text-sm text-muted-foreground",children:t.error}),e.jsx(C,{label:"Find a flight school near this airport",type:"flight-school",location:a})]})}export{F as default};
